<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hotel Booking Form | Adamâ€™s Travel Agency</title>
<link rel="stylesheet" href="css/style.css" />
<style>
/* ======================
   MAINFORM STYLES
====================== */
.form-wrapper {
    background: #fff;
    padding: 30px;
    border-radius: 15px;
    max-width: 1200px;
    width: 100%;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    margin: 30px auto;
  }

  /* Logo & Header */
  .logo-wrapper {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .logo-wrapper img {
    height: 60px;
  }

  h2 {
    text-align: center;
    font-size: 2.2rem;
    color: #006b8f;
    margin-bottom: 30px;
    font-family: Georgia;
  }

  /* Mobile heading */
  h2 {
    font-size: 1.6rem;
    margin-bottom: 30px;
  }

form {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 0;
    font-family: Georgia;

  }

  /* Sections (fieldsets) style */
fieldset {
    flex: 1 1 45%;
    border: 2px solid #ccc;
    border-radius: 10px;
    padding: 15px 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  /* Make sections stack on small screens */
  @media(max-width: 768px) {
    fieldset {
      flex: 1 1 100%;
    }
  }

  legend {
    font-weight: bold;
    font-size: 1.2rem;
    padding: 0 10px;
  }


  /* Form groups in rows no of adults & no. of children space between input fields and the type of visa and process space between */
.form-row {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }

  /* Individual input containers */
.form-group {
    flex: 1 1 45%;
    display: flex;
    flex-direction: column;
  }

   label {
    margin-bottom: 5px;
    font-weight: bold;
  }

  input[type="text"],
  input[type="email"],
  input[type="date"],
  input[type="number"],
  select {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-family: Georgia, serif;
    font-size: 1rem;
  }

  input:focus,
  select:focus {
    border-color: #0097a7;
    box-shadow: 0 0 8px rgba(0, 151, 167, 0.2);
    outline: none;
  }


  /* Submit Button */
button {
    width: 100%;
    padding: 15px;
    margin-top: 30px;
    background: linear-gradient(135deg, #0077b6, #00b4d8);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 1.2rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: Georgia;
  }

button:hover {
    background: linear-gradient(135deg, #0096c7, #48cae4);
    transform: translateY(-2px);
  }

/* Specific CSS for date inputs to ensure size consistency */
  input[type="date"] {
    width: 100% !important;
    padding: 12px !important;
    margin-bottom: 15px !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    font-size: 1em !important;

    /* Normalize appearance across browsers and devices */
    -webkit-appearance: none !important;
    appearance: none !important;

    box-sizing: border-box !important;
    min-height: 44px !important; /* Touch-friendly height */
  }

  /* Responsive adjustments */
  @media(max-width: 500px) {
    body {
      padding: 10px;
    }
  .form-wrapper{
    margin-top: 110px;
    /* The form layout: flex in rows */
  }
    }


</style>
</head>
<body>

<header>
  <!-- Logo and Title -->
  <div class="logo-container">
    <img src="images/logo.png" alt="Logo" class="logo" id="logo-img" />
    <span class="title">Adam's Travel Agency</span>
  </div>
  <!-- Navigation Menu -->
  <nav id="nav">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="flights.html">Flights</a></li>
      <li><a href="hotels.html">Hotels</a></li>
      <li><a href="visa.html">Visa</a></li>
      <li><a href="payments.html">Payments</a></li>
    </ul>
  </nav>
  <!-- Hamburger Menu for Mobile -->
  <div class="menu-toggle" id="menu-toggle" aria-label="Menu" aria-expanded="false" role="button" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>
</header>

<!-- Add id to the form wrapper for toggling visibility -->
<div class="form-wrapper" id="formWrapper">
  <!-- Logo -->
  <div class="logo-wrapper">
    <img src="images/logo.png" alt="Adam's Travel Ageny Logo" />
  </div>
  <h2>Hotel Booking Form</h2>
  <form id="hotelForm">
    <!-- Booking Details -->
    <fieldset>
      <legend>Booking Details</legend>
      <div class="form-group">
        <label for="booking-id">Booking ID Number</label>
        <input type="text" id="booking-id" name="booking-id" placeholder="Enter booking ID" required />
      </div>
      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" name="_replyto" placeholder="your@email.com" required />
      </div>
    </fieldset>

    <!-- Hotel Info -->
    <fieldset>
      <legend>Hotel Information</legend>
      <div class="form-group">
        <label for="hotel-name">Hotel Name</label>
        <input type="text" id="hotel-name" name="hotel-name" placeholder="Enter hotel name" required />
      </div>
      <div class="form-group">
        <label for="city">City / Landmark</label>
        <input type="text" id="city" name="city" placeholder="Enter city" required />
      </div>
    </fieldset>

    <!-- Stay Details -->
    <fieldset>
      <legend>Reservation Dates</legend>
      <div class="form-group">
        <label for="checkin-date">Check-In:</label>
        <input type="date" id="checkin-date" name="checkin-date" required />

        <label for="checkout-date">Check-Out:</label>
        <input type="date" id="checkout-date" name="checkout-date" required />
      </div>
    </fieldset>

    <!-- Guests -->
    <fieldset>
      <legend>No. of Guests</legend>
      <div class="form-row">
        <div class="form-group">
          <label for="adults">Adults</label>
          <input type="number" id="adults" name="adults" min="1" placeholder="Age above 12+" required />
        </div>
        <div class="form-group">
          <label for="children">Children</label>
          <input type="number" id="children" name="children" min="0" placeholder="Age below 12" />
        </div>
      </div>
      <button type="button" id="addChildrenAgesBtn">Add Child Age(s)</button>
      <div id="childAgesContainer" style="margin-top:10px;"></div>
    </fieldset>

    <!-- Number of Rooms -->
    <fieldset>
      <legend>Number of Rooms</legend>
      <input type="number" id="num-rooms" name="num-rooms" min="1" placeholder="Enter number of rooms" required />
      <!-- Guest Room Types -->
      <fieldset id="guestRoomTypesContainer" style="display:none;">
        <legend>Guest Room Types</legend>
        <div id="guestRoomTypes"></div>
      </fieldset>
      <button type="submit">Book Now</button>
    </fieldset>
  </form>

</div>

<!-- Confirmation Section -->
<div id="confirmationDisplay" style="display:none; max-width:600px; margin:20px auto; background:#fff; padding:20px; border-radius:8px;">
  <h2 style="text-align:center; color:#007bff;">Hotel Booking Confirmed!</h2>
  <div id="Details" style="margin-top:20px; background:#f9f9f9; padding:15px; border-radius:5px;"></div>
  <div style="display:flex; gap:15px; justify-content:center; margin-top:20px;">
    <button onclick="window.location.href='payments.html'">Go to Payment</button>
    <button onclick="resetForm()" style="background:#6c757d;">Book Again</button>
  </div>
</div>

<script>
  // Toggle mobile menu
  const menuToggle = document.getElementById('menu-toggle');
  const nav = document.getElementById('nav');
  menuToggle.addEventListener('click', () => {
    nav.classList.toggle('show');
    menuToggle.classList.toggle('active');
    const expanded = menuToggle.getAttribute('aria-expanded') === 'true' || false;
    menuToggle.setAttribute('aria-expanded', String(!expanded));
  });
  menuToggle.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      menuToggle.click();
    }
  });


  // MAIN FORM JAVASCRIPT
  const numRoomsInput = document.getElementById('num-rooms');
  const guestRoomTypesContainer = document.getElementById('guestRoomTypesContainer');
  const guestRoomTypesDiv = document.getElementById('guestRoomTypes');

  function generateGuestRoomTypeSelectors() {
    const count = parseInt(numRoomsInput.value) || 0;
    if (count > 0) {
      guestRoomTypesContainer.style.display = 'block';
      guestRoomTypesDiv.innerHTML = '';
      for (let i=1;i<=count;i++) {
        const div = document.createElement('div');
        div.style.marginBottom='5px';

        const label = document.createElement('label');
        label.setAttribute('for', `guest-room-type-${i}`);
        label.innerText = `Guest ${i} Room Type:`;

        const select = document.createElement('select');
        select.id=`guest-room-type-${i}`;
        select.name=`guest-room-type-${i}`;
        select.required=true;
        select.innerHTML= `
          <option value="">Select Room Type</option>
          <option value="Single">Single</option>
          <option value="Double">Double</option>
          <option value="Suite">Suite</option>
          <option value="Deluxe">Deluxe</option>
        `;

        div.appendChild(label);
        div.appendChild(select);
        guestRoomTypesDiv.appendChild(div);
      }
    } else {
      guestRoomTypesContainer.style.display='none';
      guestRoomTypesDiv.innerHTML='';
    }
  }
  window.onload=()=>{generateGuestRoomTypeSelectors();};
  document.getElementById('num-rooms').addEventListener('input', generateGuestRoomTypeSelectors);

  document.getElementById('addChildrenAgesBtn').addEventListener('click',()=>{
    const numChildren=parseInt(document.getElementById('children').value);
    const container=document.getElementById('childAgesContainer');
    container.innerHTML='';
    if(isNaN(numChildren) || numChildren<1){
      alert('Please enter a valid number of children greater than 0.');
      return;
    }
    for(let i=1;i<=numChildren;i++){
      const div=document.createElement('div');
      div.style.marginBottom='8px';

      const label=document.createElement('label');
      label.setAttribute('for', `child-age-${i}`);
      label.innerText=`Age of Child ${i}:`;

      const input=document.createElement('input');
      input.type='number';
      input.id=`child-age-${i}`;
      input.name=`child-age-${i}`;
      input.min='0';
      input.placeholder=`Enter age of child ${i}`;

      div.appendChild(label);
      div.appendChild(input);
      container.appendChild(div);
    }
  });

  document.getElementById('hotelForm').addEventListener('submit', e=>{
    e.preventDefault();

    const form=e.target;
    const bookingID='BK'+Math.floor(Math.random()*1000000);

    const childAges=[];
    const numChildren=parseInt(document.getElementById('children').value);
    for(let i=1;i<=numChildren;i++){
      const ageVal=document.getElementById(`child-age-${i}`);
      if(ageVal) childAges.push(ageVal.value);
    }

    const numRooms=parseInt(document.getElementById('num-rooms').value);
    const roomTypes=[];
    for(let i=1;i<=numRooms;i++){
      const select=document.getElementById(`guest-room-type-${i}`);
      if(select) roomTypes.push(select.value);
    }

    const booking={
      id:bookingID,
      email:document.getElementById('email').value,
      hotelName:document.getElementById('hotel-name').value,
      city:document.getElementById('city').value,
      checkIn:document.getElementById('checkin-date').value,
      checkOut:document.getElementById('checkout-date').value,
      adults:document.getElementById('adults').value,
      children:document.getElementById('children').value,
      childAges:childAges,
      numRooms:numRooms,
      roomTypes:roomTypes
    };

    sessionStorage.setItem('hotelBooking', JSON.stringify(booking));

    document.getElementById('Details').innerHTML=`
      <p><strong>Booking ID:</strong> ${booking.id}</p>
      <p><strong>Email:</strong> ${booking.email}</p>
      <p><strong>Hotel Name:</strong> ${booking.hotelName}</p>
      <p><strong>City:</strong> ${booking.city}</p>
      <p><strong>Check-In:</strong> ${booking.checkIn}</p>
      <p><strong>Check-Out:</strong> ${booking.checkOut}</p>
      <p><strong>Adults:</strong> ${booking.adults}</p>
      <p><strong>Children:</strong> ${booking.children}</p>
      <p><strong>Children Ages:</strong> ${booking.childAges.join(', ')}</p>
      <p><strong>Number of Rooms:</strong> ${booking.numRooms}</p>
      <p><strong>Guest Room Types:</strong> ${booking.roomTypes.join(', ')}</p>
    `;

    // Send form data via fetch
    fetch('https://formspree.io/f/xeoynjpa', {
      method: 'POST',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: new URLSearchParams({
        'Booking ID': booking.id,
        'Email': booking.email,
        'Hotel Name': booking.hotelName,
        'City': booking.city,
        'Check-in Date': booking.checkIn,
        'Check-out Date': booking.checkOut,
        'Adults': booking.adults,
        'Children': booking.children,
        'Children Ages': booking.childAges.join(', '),
        'Number of Rooms': booking.numRooms,
        'Guest Room Types': booking.roomTypes.join(', ')
      })
    })
    .then(res => {
      if(res.ok){
        // Hide the form wrapper and show confirmation
        document.getElementById('formWrapper').style.display='none';
        document.getElementById('confirmationDisplay').style.display='block';
      } else {
        alert('Error submitting form.');
      }
    })
    .catch(() => {
      alert('Error submitting form.');
    });
  });

  function resetForm() {
    location.reload();
  }
</script>

<!-- FOOTER -->
<footer>
    <p>&copy; 2022 Adam's Travel Agency. All rights reserved.</p>
    <p>
    <a href="privacy.html" style="text-decoration:none; color:#007bff;">Privacy Policy</a> | 
    <a href="terms.html" style="text-decoration:none; color:#007bff;">Terms of Service</a></p>
</footer>

</body>

</html>